<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    window.addEventListener('message', (event) => {
    // const allowedOrigin = 'https://yongkyu33.mycafe24.com';
    // 메시지를 보낸 출처(origin) 검증
    // if (event.origin !== allowedOrigin) {
    //     console.warn('허용되지 않은 출처에서의 메시지:', event.origin);
    //     return;
    // }

	// console.log(event.data);

    try {
        // JSON 파싱
        const messageData = JSON.parse(event.data);

        // 메시지 구조 검증
        if (messageData.method === 'setPermanentId' && messageData.params?.id) {
            console.log(messageData.params.id);
            localStorage.setItem('permanentId', messageData.params.id);
        }
    } catch (error) {
        console.error('메시지 파싱 중 오류 발생:', error);
    }
});
  </script>
  <iframe src="iframe.html" id="iframeCFATestSession"></iframe>
  
  <!-- <script src="cfa-test.js"></script> -->
  <!-- <script src="index.js"></script>
  <script>
    // Initialize the agent at application startup.
    // If you're using an ad blocker or Brave/Firefox, this import will not work.
    // Please use the NPM package instead: https://t.ly/ORyXk
    const fpPromise = import('https://openfpcdn.io/fingerprintjs/v4')
      .then(FingerprintJS => FingerprintJS.load())
  
    // Get the visitor identifier when you need it.
    fpPromise
      .then(fp => fp.get())
      .then(result => {
        // This is the visitor identifier:
        const visitorId = result.visitorId
        console.log(result)
        console.log(visitorId)
      })
  </script> -->
</body>
</html>